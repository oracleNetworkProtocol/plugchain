(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{464:function(t,e,a){"use strict";a.r(e);var s=a(15),v=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"restful-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#restful-api"}},[t._v("#")]),t._v(" Restful API")]),t._v(" "),e("h2",{attrs:{id:"query-api-激活方式和配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#query-api-激活方式和配置"}},[t._v("#")]),t._v(" Query API 激活方式和配置")]),t._v(" "),e("p",[t._v("所有路由均通过 "),e("code",[t._v("~/.plugchain/config/app.toml")]),t._v(" 中以下字段下配置：")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("api.enable = true|false")]),t._v(" 字段定义是否启用 REST 服务，默认为 "),e("code",[t._v("false")]),t._v("。")]),t._v(" "),e("li",[e("code",[t._v("api.address = {string}")]),t._v(" 字段定义服务器应绑定到的地址（实际为端口，因为主机应保持在 "),e("code",[t._v("0.0.0.0")]),t._v("）。 默认为 "),e("code",[t._v("tcp://0.0.0.0:1317")]),t._v("。")]),t._v(" "),e("li",[t._v("在 "),e("code",[t._v("~/.plugchain/config/app.toml")]),t._v(" 中定义了一些其他 API 配置选项并附有注释，请直接参考该文件。")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('###############################################################################\n###                           API Configuration                             ###\n###############################################################################\n\n[api]\n\n# Enable defines if the API server should be enabled.\nenable = true\n\n# Swagger defines if swagger documentation should automatically be registered.\nswagger = true\n\n# Address defines the API server to listen on.\naddress = "tcp://0.0.0.0:1317"\n')])])]),e("h3",{attrs:{id:"grpc-gateway-rest-路由"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#grpc-gateway-rest-路由"}},[t._v("#")]),t._v(" gRPC-gateway REST 路由")]),t._v(" "),e("p",[t._v("如果由于各种原因而不能使用 gRPC（例如，您正在构建 Web 应用，且浏览器不支持 gRPC 依赖的 HTTP2），则 Plug Chain Hub 会通过 gRPC-gateway 提供 REST 路由。")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://grpc-ecosystem.github.io/grpc-gateway/",target:"_blank",rel:"noopener noreferrer"}},[t._v("gRPC-gateway"),e("OutboundLink")],1),t._v(" 是将 gRPC 端点公开为 REST 端点的工具。对于 Protobuf 服务中定义的每个 RPC 端点，SDK提供了 REST 等效项。")]),t._v(" "),e("p",[t._v("对于应用程序开发者，需要将 gRPC-gateway REST 路由连接到 REST 服务器，通过在 ModuleManager 上调用 "),e("code",[t._v("RegisterGRPCGatewayRoutes")]),t._v(" 方法完成。")]),t._v(" "),e("h3",{attrs:{id:"swagger"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#swagger"}},[t._v("#")]),t._v(" Swagger")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://swagger.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swagger"),e("OutboundLink")],1),t._v("（或 OpenAPIv2 ）规范文件在 API 服务器上的 "),e("code",[t._v("/swagger")]),t._v(" 路径下。 Swagger 是一个开放的规范，描述服务器服务的 API 端点，包括描述、输入参数、返回类型以及有关每个端点的更多信息。")]),t._v(" "),e("p",[t._v("可以通过 "),e("code",[t._v("~/.plugchain/config/app.toml")]),t._v(" 中的 "),e("code",[t._v("api.swagger")]),t._v(" 字段配置启用 "),e("code",[t._v("/swagger")]),t._v(" 端点，默认为 "),e("code",[t._v("false")]),t._v("。")]),t._v(" "),e("p",[t._v("对于应用程序开发人员，您可能希望基于自定义模块生成自己的 Swagger 定义。可以从 Plug Chain Hub 的 "),e("a",{attrs:{href:"https://github.com/oracleNetworkProtocol/plugchain/blob/main/scripts/protoc-swagger-gen.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("Swagger 生成脚本"),e("OutboundLink")],1),t._v("开始。")]),t._v(" "),e("h2",{attrs:{id:"api-端点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api-端点"}},[t._v("#")]),t._v(" API 端点")]),t._v(" "),e("p",[e("strong",[t._v("部分 Plug Chain Hub API 端点")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("API Endpoints")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("Description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/auth/v1beta1/accounts/{address}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回账户信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/auth/v1beta1/params")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询所有参数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/bank/v1beta1/balances/{address}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询某个账户的所有 token")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/bank/v1beta1/balances/{address}/{denom}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个账户的单种 token 余额")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/bank/v1beta1/denoms_metadata")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询客户端所有已注册 token 的元数据")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/bank/v1beta1/denoms_metadata/{denom}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询客户端一种 token 的元数据")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/bank/v1beta1/params")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询 bank 模块的参数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/bank/v1beta1/supply")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询所有 token 的总发行量")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/bank/v1beta1/supply/{denom}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一种 token 的总发行量")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/distribution/v1beta1/community_pool")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询社区池中的 token")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/distribution/v1beta1/delegators/{delegator_address}/rewards")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询委托人在每个验证人处累计的总奖励")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/distribution/v1beta1/delegators/{delegator_address}/rewards/{validator_address}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询委托人在一个验证人处累积的奖励")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/distribution/v1beta1/delegators/{delegator_address}/validators")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个委托人所有委托的验证人")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/distribution/v1beta1/delegators/{delegator_address}/withdraw_address")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个委托人的提款地址")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/distribution/v1beta1/params")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询 distribution 模块参数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/distribution/v1beta1/validators/{validator_address}/commission")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个验证人的累积佣金")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/distribution/v1beta1/validators/{validator_address}/outstanding_rewards")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个验证人的奖励")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/distribution/v1beta1/validators/{validator_address}/slashes")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个验证人的惩罚事件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/evidence/v1beta1/evidence")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询所有 evidence")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/evidence/v1beta1/evidence/{evidence_hash}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("通过哈希查询 evidence")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/gov/v1beta1/params/{params_type}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询 gov 模块参数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/gov/v1beta1/proposals")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定状态的所有提议")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("通过 ID 查询提议")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}/deposits")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询某个提议的所有抵押")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}/deposits/{depositor}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个提议中一个抵押者的抵押信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}/tally")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个提议的投票统计")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}/votes")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个提议的所有投票")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/gov/v1beta1/proposals/{proposal_id}/votes/{voter}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个提议中某个投票者的投票信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/params/v1beta1/params")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("通过 subspace 和 key 查询一个模块的指定参数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/slashing/v1beta1/params")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询 slashing 模块参数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/slashing/v1beta1/signing_infos")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询所有验证人的签名信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/slashing/v1beta1/signing_infos/{cons_address}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个地址的签名信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/delegations/{delegator_addr}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个委托人所有的委托信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/delegators/{delegator_addr}/redelegations")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个地址的重委托信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/delegators/{delegator_addr}/unbonding_delegations")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询给定委托人的所有解委托信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/delegators/{delegator_addr}/validators")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定委托人的所有验证人信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/delegators/{delegator_addr}/validators/{validator_addr}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定验证人和委托人对的验证人信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/historical_info/{height}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定高度的历史信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/params")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询 staking 模块参数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/pool")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询池子信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/validators")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询匹配指定状态的所有验证人")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/validators/{validator_addr}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("通过验证人地址查询验证人信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/validators/{validator_addr}/delegations")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个验证人的委托信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/validators/{validator_addr}/delegations/{delegator_addr}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定验证人和委托人之间的委托信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/validators/{validator_addr}/delegations/{delegator_addr}/unbonding_delegation")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定验证人和委托人之间的解委托信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/staking/v1beta1/validators/{validator_addr}/unbonding_delegations")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询一个验证人的解委托信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/upgrade/v1beta1/applied_plan/{name}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("通过名称查询已应用的升级计划")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/upgrade/v1beta1/current_plan")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询当前升级计划")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/upgrade/v1beta1/upgraded_consensus_state/{last_height}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询共识状态，该状态将用作此链的下一版本的受信任内核")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/base/tendermint/v1beta1/blocks/latest")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("返回最新高度的区块")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/base/tendermint/v1beta1/blocks/{height}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定高度的区块")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/base/tendermint/v1beta1/node_info")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询当前节点信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/base/tendermint/v1beta1/syncing")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询节点同步信息")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/base/tendermint/v1beta1/validatorsets/latest")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询当前区块验证人集合")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/base/tendermint/v1beta1/validatorsets/{height}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("查询指定高度验证人集合")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("POST")]),t._v(" "),e("code",[t._v("/cosmos/tx/v1beta1/simulate")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("模拟交易执行以预估 Gas 消耗")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/tx/v1beta1/txs")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("通过事件筛选交易")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("POST")]),t._v(" "),e("code",[t._v("/cosmos/tx/v1beta1/txs")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("广播交易")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("GET")]),t._v(" "),e("code",[t._v("/cosmos/tx/v1beta1/txs/{hash}")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("通过哈希查询交易")])])])]),t._v(" "),e("h2",{attrs:{id:"查询交易"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查询交易"}},[t._v("#")]),t._v(" 查询交易")]),t._v(" "),e("p",[t._v("使用 gRPC-gateway REST 端点查询事务可以通过发送 GET 请求来完成，示例如下所示：")]),t._v(" "),e("ul",[e("li",[e("p",[e("strong",[t._v("Query tx by hash:")]),t._v(" "),e("code",[t._v("/cosmos/tx/v1beta1/txs/{hash}")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-X")]),t._v(" GET "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"accept: application/json"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:1317/cosmos/tx/v1beta1/txs/{hash}"')]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("Query tx by events:")]),t._v(" "),e("code",[t._v("/cosmos/tx/v1beta1/txs")]),t._v(" "),e("a",{attrs:{href:"#%E4%BA%8B%E4%BB%B6"}},[t._v("事件格式 {eventType}.{eventAttribute}={value}")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-X")]),t._v(" GET "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"accept: application/json"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:1317/cosmos/tx/v1beta1/txs?events={eventType}.{eventAttribute}={value}&events={eventType}.{eventAttribute}={value}&pagination.limit=100&pagination.offset=0"')]),t._v("\n")])])])])]),t._v(" "),e("h3",{attrs:{id:"事件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#事件"}},[t._v("#")]),t._v(" 事件")]),t._v(" "),e("p",[t._v("事件 在 Cosmos SDK 中作为 ABCI "),e("code",[t._v("Event")]),t._v(" 类型的别名实现，并且\n采用以下形式："),e("code",[t._v("{eventType}.{attributeKey}={attributeValue}")]),t._v("。")]),t._v(" "),e("p",[t._v("一个事件包含：")]),t._v(" "),e("ul",[e("li",[t._v('用于对事件进行高级分类的"类型"; 例如，Cosmos SDK 使用 '),e("code",[t._v('"message"')]),t._v(" 类型通过 "),e("code",[t._v("Msg")]),t._v(" 过滤事件。")]),t._v(" "),e("li",[e("code",[t._v("attributes")]),t._v(" 列表是提供有关分类事件的更多信息的键值对。 例如，对于 "),e("code",[t._v('"message"')]),t._v(" 类型，我们可以使用 "),e("code",[t._v("message.action={some_action}")]),t._v("、"),e("code",[t._v("message.module={some_module}")]),t._v(" 或 "),e("code",[t._v("message.sender={some_sender} 按键值对过滤事件")]),t._v("。")]),t._v(" "),e("li",[t._v("分页查询需要参数"),e("code",[t._v("pagination.limit")]),t._v("和 "),e("code",[t._v("pagination.offset")]),t._v(" 配合使用。egg: 查询100条记录，从第0条开始:"),e("code",[t._v("pagination.limit=100&pagination.offset=0")]),t._v("  查询第二页参数 "),e("code",[t._v("pagination.limit=100&pagination.offset=100")]),t._v(" pagination.limit 参数最大值为"),e("code",[t._v("100")])])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),e("p",[t._v("要将属性值解析为字符串，请确保在每个属性值周围添加 "),e("code",[t._v("'")]),t._v("（单引号）。")])]),t._v(" "),e("h4",{attrs:{id:"例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[t._v("#")]),t._v(" 例子")]),t._v(" "),e("p",[t._v("以下示例展示了如何使用 Cosmos SDK 查询事件。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Event")]),t._v(" "),e("th",[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("tx.height=23")]),t._v(" "),e("td",[t._v("查询23块高的所有交易")])]),t._v(" "),e("tr",[e("td",[t._v("tx.hash='DF9738772AAECE...'")]),t._v(" "),e("td",[t._v("查询指定hash交易")])]),t._v(" "),e("tr",[e("td",[t._v("message.action='/cosmos.bank.v1beta1.MsgSend'")]),t._v(" "),e("td",[t._v("查询所有包含 x/bank "),e("code",[t._v("Send")]),t._v(" 的交易。")])]),t._v(" "),e("tr",[e("td",[t._v("message.module='bank'")]),t._v(" "),e("td",[t._v("查询所有包含来自 "),e("code",[t._v("x/bank")]),t._v(" 模块的消息的交易。")])])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th"),t._v(" "),e("th",[t._v("message.module")]),t._v(" "),e("th",[t._v("message.action")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("交易")]),t._v(" "),e("td",[t._v("bank")]),t._v(" "),e("td",[t._v("/cosmos.bank.v1beta1.MsgSend")])]),t._v(" "),e("tr",[e("td",[t._v("批量交易")]),t._v(" "),e("td",[t._v("bank")]),t._v(" "),e("td",[t._v("/cosmos.bank.v1beta1.MsgMultiSend")])]),t._v(" "),e("tr",[e("td",[t._v("资助社区池")]),t._v(" "),e("td",[t._v("distribution")]),t._v(" "),e("td",[t._v("/cosmos.distribution.v1beta1.MsgFundCommunityPool")])]),t._v(" "),e("tr",[e("td",[t._v("设置提现地址")]),t._v(" "),e("td",[t._v("distribution")]),t._v(" "),e("td",[t._v("/cosmos.distribution.v1beta1.MsgSetWithdrawAddress")])]),t._v(" "),e("tr",[e("td",[t._v("提取质押收益")]),t._v(" "),e("td",[t._v("distribution")]),t._v(" "),e("td",[t._v("/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward")])]),t._v(" "),e("tr",[e("td",[t._v("验证者提取佣金")]),t._v(" "),e("td",[t._v("distribution")]),t._v(" "),e("td",[t._v("/cosmos.distribution.v1beta1.MsgWithdrawValidatorCommission")])]),t._v(" "),e("tr",[e("td",[t._v("投票")]),t._v(" "),e("td",[t._v("governance")]),t._v(" "),e("td",[t._v("/cosmos.gov.v1beta1.MsgVote")])]),t._v(" "),e("tr",[e("td",[t._v("加权投票")]),t._v(" "),e("td",[t._v("governance")]),t._v(" "),e("td",[t._v("/cosmos.gov.v1beta1.MsgVoteWeighted")])]),t._v(" "),e("tr",[e("td",[t._v("发起提案")]),t._v(" "),e("td",[t._v("governance")]),t._v(" "),e("td",[t._v("/cosmos.gov.v1beta1.MsgSubmitProposal")])]),t._v(" "),e("tr",[e("td",[t._v("向现有提案提交存款")]),t._v(" "),e("td",[t._v("governance")]),t._v(" "),e("td",[t._v("/cosmos.gov.v1beta1.MsgDeposit")])]),t._v(" "),e("tr",[e("td",[t._v("把现有质押从当前节点转质押到另一个节点")]),t._v(" "),e("td",[t._v("staking")]),t._v(" "),e("td",[t._v("/cosmos.staking.v1beta1.MsgBeginRedelegate")])]),t._v(" "),e("tr",[e("td",[t._v("创建验证者")]),t._v(" "),e("td",[t._v("staking")]),t._v(" "),e("td",[t._v("/cosmos.staking.v1beta1.MsgCreateValidator")])]),t._v(" "),e("tr",[e("td",[t._v("质押到验证者获取收益")]),t._v(" "),e("td",[t._v("staking")]),t._v(" "),e("td",[t._v("/cosmos.staking.v1beta1.MsgDelegate")])]),t._v(" "),e("tr",[e("td",[t._v("修改验证者信息")]),t._v(" "),e("td",[t._v("staking")]),t._v(" "),e("td",[t._v("/cosmos.staking.v1beta1.MsgEditValidator")])]),t._v(" "),e("tr",[e("td",[t._v("赎回质押")]),t._v(" "),e("td",[t._v("staking")]),t._v(" "),e("td",[t._v("/cosmos.staking.v1beta1.MsgUndelegate")])]),t._v(" "),e("tr",[e("td",[t._v("验证者解除监禁")]),t._v(" "),e("td",[t._v("slashing")]),t._v(" "),e("td",[t._v("/cosmos.slashing.v1beta1.MsgUnjail")])]),t._v(" "),e("tr",[e("td",[t._v("销毁prc10 代币")]),t._v(" "),e("td",[t._v("token")]),t._v(" "),e("td",[t._v("/plugchain.prc10.MsgBurnToken")])]),t._v(" "),e("tr",[e("td",[t._v("修改prc10 代币信息")]),t._v(" "),e("td",[t._v("token")]),t._v(" "),e("td",[t._v("/plugchain.prc10.MsgEditToken")])]),t._v(" "),e("tr",[e("td",[t._v("创建prc10 代币")]),t._v(" "),e("td",[t._v("token")]),t._v(" "),e("td",[t._v("/plugchain.prc10.MsgIssueToken")])]),t._v(" "),e("tr",[e("td",[t._v("增发prc10 代币")]),t._v(" "),e("td",[t._v("token")]),t._v(" "),e("td",[t._v("/plugchain.prc10.MsgMintToken")])]),t._v(" "),e("tr",[e("td",[t._v("pvm交易")]),t._v(" "),e("td",[t._v("evm")]),t._v(" "),e("td",[t._v("/ethermint.evm.v1.MsgEthereumTx")])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[t._v("liquidity")]),t._v(" "),e("td",[t._v("/tendermint.liquidity.v1beta1.MsgCreatePool")])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[t._v("liquidity")]),t._v(" "),e("td",[t._v("/tendermint.liquidity.v1beta1.MsgDepositWithinBatch")])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[t._v("liquidity")]),t._v(" "),e("td",[t._v("/tendermint.liquidity.v1beta1.MsgSwapWithinBatch")])]),t._v(" "),e("tr",[e("td"),t._v(" "),e("td",[t._v("liquidity")]),t._v(" "),e("td",[t._v("/tendermint.liquidity.v1beta1.MsgWithdrawWithinBatch")])])])]),t._v(" "),e("h2",{attrs:{id:"构造和签名交易"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构造和签名交易"}},[t._v("#")]),t._v(" 构造和签名交易")]),t._v(" "),e("p",[t._v("使用 REST 不能构造和签名交易，只能广播交易。您可以使用 "),e("RouterLink",{attrs:{to:"/zh/endpoints/grpc-client.html"}},[t._v("gRPC 客户端")]),t._v(" 构造和签名交易。")],1),t._v(" "),e("h2",{attrs:{id:"广播交易"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#广播交易"}},[t._v("#")]),t._v(" 广播交易")]),t._v(" "),e("p",[t._v("使用 gRPC-gateway REST 端点 "),e("code",[t._v("cosmos/tx/v1beta1/txs")]),t._v(" 广播交易可以通过发送 POST 请求来完成，如下所示，其中 "),e("code",[t._v("NewTxBytes")]),t._v(" 是已签名交易的 protobuf 编码的字节数组：")]),t._v(" "),e("div",{staticClass:"language-go extra-class"},[e("pre",{pre:!0,attrs:{class:"language-go"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"encoding/base64"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendTx")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//--剪断--")]),t._v("\n    \n    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// base64 对编码的 tx 字节进行编码")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// txBytes 通过 `encCfg.TxConfig.TxEncoder()(txBuilder.GetTx())` 或者 `encCfg.TxConfig.TxJSONEncoder()(txBuilder.GetTx())` 获得")]),t._v("\n\n    NewTxBytes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" base64"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StdEncoding"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("EncodeToString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("txBytes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    fmt"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("NewTxBytes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-X")]),t._v(" POST "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type: application/json"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-d")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"tx_bytes":"{{NewTxBytes}}","mode":"BROADCAST_MODE_SYNC"}\'')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:1317/cosmos/tx/v1beta1/txs"')]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=v.exports}}]);