(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{379:function(t,e,s){"use strict";s.r(e);var a=s(15),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"subscribe"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#subscribe"}},[t._v("#")]),t._v(" Subscribe")]),t._v(" "),e("p",[e("code",[t._v("Event")]),t._v("s are objects that contain information about the execution of the application. They are\nmainly used by service providers like block explorers and wallet to track the execution of various\nmessages and index transactions.")]),t._v(" "),e("h2",{attrs:{id:"pre-requisite-readings"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pre-requisite-readings"}},[t._v("#")]),t._v(" Pre-requisite Readings")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://docs.cosmos.network/master/core/events.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cosmos SDK Events"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://geth.ethereum.org/docs/rpc/pubsub",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ethereum's PubSub JSON-RPC API"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"sdk-and-tendermint-events"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sdk-and-tendermint-events"}},[t._v("#")]),t._v(" SDK and Tendermint Events")]),t._v(" "),e("p",[t._v("It is possible to subscribe to "),e("code",[t._v("Events")]),t._v(" via Tendermint's "),e("a",{attrs:{href:"https://tendermint.com/docs/app-dev/subscribing-to-events-via-websocket.html#subscribing-to-events-via-websocket",target:"_blank",rel:"noopener noreferrer"}},[t._v("Websocket"),e("OutboundLink")],1),t._v(".\nThis is done by calling the "),e("code",[t._v("subscribe")]),t._v(" RPC method via Websocket:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"jsonrpc"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"method"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"subscribe"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"params"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"tm.event='eventCategory' AND eventType.eventAttribute='attributeValue'\"")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("The main "),e("code",[t._v("eventCategory")]),t._v(" you can subscribe to are:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("NewBlock")]),t._v(": Contains "),e("code",[t._v("events")]),t._v(" triggered during "),e("code",[t._v("BeginBlock")]),t._v(" and "),e("code",[t._v("EndBlock")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("Tx")]),t._v(": Contains "),e("code",[t._v("events")]),t._v(" triggered during "),e("code",[t._v("DeliverTx")]),t._v(" (i.e. transaction processing).")]),t._v(" "),e("li",[e("code",[t._v("ValidatorSetUpdates")]),t._v(": Contains validator set updates for the block.")])]),t._v(" "),e("p",[t._v("These events are triggered from the "),e("code",[t._v("state")]),t._v(" package after a block is committed. You can get the full\nlist of "),e("code",[t._v("event")]),t._v(" categories\n"),e("a",{attrs:{href:"https://godoc.org/github.com/tendermint/tendermint/types#pkg-constants",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("type")]),t._v(" and "),e("code",[t._v("attribute")]),t._v(" value of the "),e("code",[t._v("query")]),t._v(" allow you to filter the specific "),e("code",[t._v("event")]),t._v(" you are\nlooking for. For example, a "),e("code",[t._v("MsgEthereumTx")]),t._v(" transaction triggers an "),e("code",[t._v("event")]),t._v(" of type "),e("code",[t._v("ethermint")]),t._v(" and\nhas "),e("code",[t._v("sender")]),t._v(" and "),e("code",[t._v("recipient")]),t._v(" as "),e("code",[t._v("attributes")]),t._v(". Subscribing to this "),e("code",[t._v("event")]),t._v(" would be done like so:")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"jsonrpc"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"method"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"subscribe"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"params"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"query"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"tm.event='Tx' AND ethereum.recipient='hexAddress'\"")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("where "),e("code",[t._v("hexAddress")]),t._v(" is an EIP-55 address (eg: "),e("code",[t._v("0x1122334455667788990011223344556677889900")]),t._v(").")]),t._v(" "),e("h3",{attrs:{id:"tendermint-websocket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tendermint-websocket"}},[t._v("#")]),t._v(" Tendermint Websocket")]),t._v(" "),e("p",[t._v("To start a connection with the Tendermint websocket you need to define the address with the "),e("code",[t._v("--rpc.laddr")]),t._v("\nflag when starting the node (default "),e("code",[t._v("tcp://127.0.0.1:26657")]),t._v("):")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("plugchaind start "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--rpc.laddr")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tcp://127.0.0.1:26657"')]),t._v("\n")])])]),e("p",[t._v("Then, start a websocket subscription with "),e("a",{attrs:{href:"https://github.com/hashrocket/ws",target:"_blank",rel:"noopener noreferrer"}},[t._v("ws"),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# connect to tendermint websocket at port 8080 as defined above")]),t._v("\nws ws://localhost:8080/websocket\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# subscribe to new Tendermint block headers")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jsonrpc"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),t._v(", "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"method"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"subscribe"')]),t._v(", "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"params"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"tm.event='NewBlockHeader'\"")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(", "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"list-of-tendermint-events"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#list-of-tendermint-events"}},[t._v("#")]),t._v(" List of Tendermint Events")]),t._v(" "),e("p",[t._v("The main events you can subscribe to are:")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("NewBlock")]),t._v(": Contains "),e("code",[t._v("events")]),t._v(" triggered during "),e("code",[t._v("BeginBlock")]),t._v(" and "),e("code",[t._v("EndBlock")]),t._v(".")]),t._v(" "),e("li",[e("code",[t._v("Tx")]),t._v(": Contains "),e("code",[t._v("events")]),t._v(" triggered during "),e("code",[t._v("DeliverTx")]),t._v(" (i.e. transaction processing).")]),t._v(" "),e("li",[e("code",[t._v("ValidatorSetUpdates")]),t._v(": Contains validator set updates for the block.")])]),t._v(" "),e("p",[t._v("List of all Tendermint event keys:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th"),t._v(" "),e("th",[t._v("Event Type")]),t._v(" "),e("th",[t._v("Categories")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("Subscribe to a specific event")]),t._v(" "),e("td",[e("code",[t._v('"tm.event"')])]),t._v(" "),e("td",[e("code",[t._v("block")])])]),t._v(" "),e("tr",[e("td",[t._v("Subscribe to a specific transaction")]),t._v(" "),e("td",[e("code",[t._v('"tx.hash"')])]),t._v(" "),e("td",[e("code",[t._v("block")])])]),t._v(" "),e("tr",[e("td",[t._v("Subscribe to transactions at a specific block height")]),t._v(" "),e("td",[e("code",[t._v('"tx.height"')])]),t._v(" "),e("td",[e("code",[t._v("block")])])]),t._v(" "),e("tr",[e("td",[t._v("Index "),e("code",[t._v("BeginBlock")]),t._v(" and "),e("code",[t._v("Endblock")]),t._v(" events")]),t._v(" "),e("td",[e("code",[t._v('"block.height"')])]),t._v(" "),e("td",[e("code",[t._v("block")])])]),t._v(" "),e("tr",[e("td",[t._v("Subscribe to ABCI "),e("code",[t._v("BeginBlock")]),t._v(" events")]),t._v(" "),e("td",[e("code",[t._v('"begin_block"')])]),t._v(" "),e("td",[e("code",[t._v("block")])])]),t._v(" "),e("tr",[e("td",[t._v("Subscribe to ABCI "),e("code",[t._v("EndBlock")]),t._v(" events")]),t._v(" "),e("td",[e("code",[t._v('"end_block"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])])])]),t._v(" "),e("p",[t._v("Below is a list of values that you can use to subscribe for the "),e("code",[t._v("tm.event")]),t._v(" type:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th"),t._v(" "),e("th",[t._v("Event Value")]),t._v(" "),e("th",[t._v("Categories")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("New block")]),t._v(" "),e("td",[e("code",[t._v('"NewBlock"')])]),t._v(" "),e("td",[e("code",[t._v("block")])])]),t._v(" "),e("tr",[e("td",[t._v("New block header")]),t._v(" "),e("td",[e("code",[t._v('"NewBlockHeader"')])]),t._v(" "),e("td",[e("code",[t._v("block")])])]),t._v(" "),e("tr",[e("td",[t._v("New Byzantine Evidence")]),t._v(" "),e("td",[e("code",[t._v('"NewEvidence"')])]),t._v(" "),e("td",[e("code",[t._v("block")])])]),t._v(" "),e("tr",[e("td",[t._v("New transaction")]),t._v(" "),e("td",[e("code",[t._v('"Tx"')])]),t._v(" "),e("td",[e("code",[t._v("block")])])]),t._v(" "),e("tr",[e("td",[t._v("Validator set updated")]),t._v(" "),e("td",[e("code",[t._v('"ValidatorSetUpdates"')])]),t._v(" "),e("td",[e("code",[t._v("block")])])]),t._v(" "),e("tr",[e("td",[t._v("Block sync status")]),t._v(" "),e("td",[e("code",[t._v('"BlockSyncStatus"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])]),t._v(" "),e("tr",[e("td",[t._v("lock")]),t._v(" "),e("td",[e("code",[t._v('"Lock"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])]),t._v(" "),e("tr",[e("td",[t._v("New consensus round")]),t._v(" "),e("td",[e("code",[t._v('"NewRound"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])]),t._v(" "),e("tr",[e("td",[t._v("Polka")]),t._v(" "),e("td",[e("code",[t._v('"Polka"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])]),t._v(" "),e("tr",[e("td",[t._v("Relock")]),t._v(" "),e("td",[e("code",[t._v('"Relock"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])]),t._v(" "),e("tr",[e("td",[t._v("State sync status")]),t._v(" "),e("td",[e("code",[t._v('"StateSyncStatus"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])]),t._v(" "),e("tr",[e("td",[t._v("Timeout propose")]),t._v(" "),e("td",[e("code",[t._v('"TimeoutPropose"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])]),t._v(" "),e("tr",[e("td",[t._v("Timeout wait")]),t._v(" "),e("td",[e("code",[t._v('"TimeoutWait"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])]),t._v(" "),e("tr",[e("td",[t._v("Unlock")]),t._v(" "),e("td",[e("code",[t._v('"Unlock"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])]),t._v(" "),e("tr",[e("td",[t._v("Block is valid")]),t._v(" "),e("td",[e("code",[t._v('"ValidBlock"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])]),t._v(" "),e("tr",[e("td",[t._v("Consensus vote")]),t._v(" "),e("td",[e("code",[t._v('"Vote"')])]),t._v(" "),e("td",[e("code",[t._v("consensus")])])])])]),t._v(" "),e("h2",{attrs:{id:"ethereum-json-rpc-events"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ethereum-json-rpc-events"}},[t._v("#")]),t._v(" Ethereum JSON-RPC Events")]),t._v(" "),e("p",[t._v("Plug Chain also supports the Ethereum "),e("a",{attrs:{href:"https://eth.wiki/json-rpc/API",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSON-RPC"),e("OutboundLink")],1),t._v(" filters calls to\nsubscribe to "),e("a",{attrs:{href:"https://eth.wiki/json-rpc/API#eth_newfilter",target:"_blank",rel:"noopener noreferrer"}},[t._v("state logs"),e("OutboundLink")],1),t._v(",\n"),e("a",{attrs:{href:"https://eth.wiki/json-rpc/API#eth_newblockfilter",target:"_blank",rel:"noopener noreferrer"}},[t._v("blocks"),e("OutboundLink")],1),t._v(" or "),e("a",{attrs:{href:"https://eth.wiki/json-rpc/API#eth_newpendingtransactionfilter",target:"_blank",rel:"noopener noreferrer"}},[t._v("pending\ntransactions"),e("OutboundLink")],1),t._v(" changes.")]),t._v(" "),e("p",[t._v("Under the hood, it uses the Tendermint RPC client's event system to process subscriptions that are\nthen formatted to Ethereum-compatible events.")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-X")]),t._v(" POST "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--data")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"jsonrpc":"2.0","method":"eth_newBlockFilter","params":[],"id":1}\'')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type: application/json"')]),t._v(" http://localhost:8545\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jsonrpc"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(":1,"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x3503de5f0c766c68f78a03a3b05036a5"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Then you can check if the state changes with the "),e("a",{attrs:{href:"https://eth.wiki/json-rpc/API#eth_getfilterchanges",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("eth_getFilterChanges")]),e("OutboundLink")],1),t._v(" call:")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-X")]),t._v(" POST "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--data")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"jsonrpc":"2.0","method":"eth_getFilterChanges","params":["0x3503de5f0c766c68f78a03a3b05036a5"],"id":1}\'')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-H")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Content-Type: application/json"')]),t._v(" http://localhost:8545\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jsonrpc"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(":1,"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result"')]),t._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x7d44dceff05d5963b5bc81df7e9f79b27e777b0a03a6feca09f3447b99c6fa71"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x3961e4050c27ce0145d375255b3cb829a5b4e795ac475c05a219b3733723d376"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xd7a497f95167d63e6feca70f344d9f6e843d097b62729b8f43bdcd5febf142ab"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x55d80a4ba6ef54f2a8c0b99589d017b810ed13a1fda6a111e1b87725bc8ceb0e"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x9e8b92c17280dd05f2562af6eea3285181c562ebf41fc758527d4c30364bcbc4"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x7353a4b9d6b35c9eafeccaf9722dd293c46ae2ffd4093b2367165c3620a0c7c9"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x026d91bda61c8789c59632c349b38fd7e7557e6b598b94879654a644cfa75f30"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x73e3245d4ddc3bba48fa67633f9993c6e11728a36401fa1206437f8be94ef1d3"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"ethereum-websocket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ethereum-websocket"}},[t._v("#")]),t._v(" Ethereum Websocket")]),t._v(" "),e("p",[t._v("Since Plug Chain runs uses Tendermint Core as it's consensus Engine and it's built with the Cosmos\nSDK framework, it inherits the event format from them. However, in order to support the native Web3\ncompatibility for websockets of the "),e("a",{attrs:{href:"https://geth.ethereum.org/docs/rpc/pubsub",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ethereum's\nPubSubAPI"),e("OutboundLink")],1),t._v(", Plug Chain needs to cast the Tendermint\nresponses retrieved into the Ethereum types.")]),t._v(" "),e("p",[t._v("You can start a connection with the Ethereum websocket using the "),e("code",[t._v("--json-rpc.ws-address")]),t._v(" flag when starting\nthe node (default "),e("code",[t._v('"0.0.0.0:8546"')]),t._v("):")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("plugchaind start  --json-rpc.address"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0.0:8545"')]),t._v(" --json-rpc.ws-address"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0.0:8546"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--evm.rpc.api")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eth,web3,net,txpool,debug"')]),t._v(" --json-rpc.enable\n")])])]),e("p",[t._v("Then, start a websocket subscription with "),e("a",{attrs:{href:"https://github.com/hashrocket/ws",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("ws")]),e("OutboundLink")],1)]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# connect to tendermint websocet at port 8546 as defined above")]),t._v("\nws ws://localhost:8546/\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# subscribe to new Ethereum-formatted block Headers")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"method"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eth_subscribe"')]),t._v(", "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"params"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"newHeads"')]),t._v(", "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jsonrpc"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2.0"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"result"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x44e010cb2c3161e9c02207ff172166ef"')]),t._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),t._v(":1"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);